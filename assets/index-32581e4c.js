!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))_(e);new MutationObserver((e=>{for(const E of e)if("childList"===E.type)for(const e of E.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&_(e)})).observe(document,{childList:!0,subtree:!0})}function _(e){if(e.ep)return;e.ep=!0;const _=function(e){const _={};return e.integrity&&(_.integrity=e.integrity),e.referrerPolicy&&(_.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?_.credentials="include":"anonymous"===e.crossOrigin?_.credentials="omit":_.credentials="same-origin",_}(e);fetch(e.href,_)}}();const e={},_=function(_,E,A){if(!E||0===E.length)return _();const t=document.getElementsByTagName("link");return Promise.all(E.map((_=>{if(_=function(e,_){return new URL(e,_).href}(_,A),_ in e)return;e[_]=!0;const E=_.endsWith(".css"),a=E?'[rel="stylesheet"]':"";if(!!A)for(let e=t.length-1;e>=0;e--){const A=t[e];if(A.href===_&&(!E||"stylesheet"===A.rel))return}else if(document.querySelector(`link[href="${_}"]${a}`))return;const O=document.createElement("link");return O.rel=E?"stylesheet":"modulepreload",E||(O.as="script",O.crossOrigin=""),O.href=_,document.head.appendChild(O),E?new Promise(((e,E)=>{O.addEventListener("load",e),O.addEventListener("error",(()=>E(new Error(`Unable to preload CSS for ${_}`))))})):void 0}))).then((()=>_()))},{EVENTS_NAMES:E}={ACTIONS_STEP_VALUE:{rotate:1,move:1},ANIMATE_LEFT:3.1,ANIMATE_TOP:3.1,APP_NAME:"Tetris",APP_VERSION:"0.0.2",AUTO_MOVE_ENABLE:!1,AUTO_MOVE_INTERVAL_SHAPE:800,BOARD_DATA_COLUMN:"data-board-column",BOARD_DATA_ROW:"data-board-row",CSS_CLASS_BOX_HIDDEN:"shape-part-hide",CSS_CLASS_BOX_SHOWING:"shape-part-show",CSS_CLASS_NAME_ANIMATE:"animate",CSS_CLASS_NAME_FREE_BOX:"free-box",CSS_CLASS_OPACITY_0_1:"opacity-0-1",CSS_CLASS_SHAPE:"shape",CSS_CLASS_SHAPE_NAME:"shape-name-{NAME}",CSS_CLASS_SHAPE_Y_BY_X:"shape-{X}-by-{Y}",EVENTS_NAMES:{GAME_BOOTUP:"game:bootUp",GAME_BOARD_APPENDED:"game:boardAppended",GAME_BOOTED:"game:booted",GAME_OVER:"game:over",GAME_CLEAR_FULL_ROWS:"game:clearFullRows",GAME_NO_ROWS_TO_CLEAR:"game:noRowsToClear",GAME_HAS_ROWS_TO_CLEAR:"game:hasRowsToClear",ACTION_TEMPORARY_DISABLD:"action:temporaryDisabled",ACTION_NOT_FOUND:"action:notFound",BOARD_BOOTUP:"board:bootUp",BOARD_BOOTED:"board:booted",BOARD_ELEMENT_READY:"board:elementReady",BOARD_APPENDED:"board:appended",BOARD_SHAPE_ADDED:"board:shapeAdded",BOARD_FULL_ROWS_CLEARED:"board:fullRowsCleared",BOARD_MATRIX_UPDATED:"boardMatrix:updated",SHAPE_FETCH_NEW:"shape:fetchNew",SHAPE_READY_TO_USE:"shape:readyToUse",SHAPE_ADDED_TO_BOARD:"shape:addedToBoard",SHAPE_BEFORE_ACTION_EXECUTION:"shape:beforeActionExecution",SHAPE_AFTER_ACTION_EXECUTION:"shape:afterActionExecution",SHAPE_UPDATED_ON_UI:"shape:updatedOnUI",SHAPE_REACHED_MAX_LEFT:"shape:reachedMaxLeft",SHAPE_REACHED_MAX_RIGHT:"shape:reachedMaxRight",SHAPE_REACHED_MAX_BOTTOM:"shape:reachedMaxBottom",SHAPE_OVERLEPPING_LEFT:"shape:overlappingLeft",SHAPE_OVERLEPPING_RIGHT:"shape:overlappingRight",SHAPE_CANNOT_ROTATE_SO_CLOSE_TO_THE_EDGE:"shape:cannotRotateSoCloseToTheEdge",SHAPE_DETACH_INTO_BOXES:"shape:detachIntoBoxes",SHAPE_DETACHED_INTO_BOXES:"shape:detachedIntoBoxes"},GAME_SETTINGS:{ROWS:6,COLUMNS:8,element:null,startWithShape:null},KEY_TO_DIRECTION:{ArrowLeft:"left",ArrowRight:"right",ArrowDown:"down"},KEY_TO_ROTATE:[" "," "],NON_OCCUPIED_COLUMN_VALUE:0,NOTIFY_TRIGGERS:!0,OCCUPIED_COLUMN_VALUE:1,PRINT_EVENTS_TO_CONSOLE:!0,REQUIRED_PROPERTIES_FOR_CLONE:{location:"Object",matrix:"Array",actions:"Object"},ROOT_FONT_SIZE:"18px",ROTATION_ANGLES:[0,90,180,270,360],SELECTOR_BOARD:"board",SELECTOR_HINTS_WRAPPER:"hints_wrapper",SELECTOR_PREFIX_ROTATE:"rotate-",SELECTOR_SHAPE_FULL_CLASS_NAME_SHAPE:"shape shape-name-{NAME} shape-{X}-by-{Y}",SELECTOR_SHAPE_WRAPPER:"shapes_wrapper",SHAPES_PACKAGE_NAME:"package_1",SHAPE_DATA_BOX_PART_COLUMN:"data-box-part-column",SHAPE_DATA_BOX_PART_ROW:"data-box-part-row",SHAPE_DATA_NEW_COLUMN:"data-shape-new-column",SHAPE_DATA_NEW_ROW:"data-shape-new-row",SPACE_FIX:.1,TIMEOUT_ADD_ANIMATE_CSS_CLASS:100,TIMEOUT_AFTER_ROWS_CLEARED:10,TIMEOUT_DETACH_SHAPE_INFO_BOXES:700,TIMEOUT_REMOVE_ANIMATE_CSS_CLASS:100,VALID_ACTIONS:{ROTATE:"rotate",MOVE:"move"},VALID_DIRECTIONS:{DOWN:"down",LEFT:"left",RIGHT:"right",SPACEBAR:" ",ENTER:"Enter"}},A={[E.SHAPE_CANNOT_ROTATE_SO_CLOSE_TO_THE_EDGE]:{text:"You cannot rotate the shape in this location"},[E.ACTION_TEMPORARY_DISABLD]:{text:"Not accepting new inputs right now"},[E.ACTION_NOT_FOUND]:{text:"Action not found"},default:{text:"Try to move in the other direction ({EVENT_NAME})",params:{EVENT_NAME:null}}};const{BOARD_DATA_COLUMN:t,BOARD_DATA_ROW:a,CSS_CLASS_BOX_HIDDEN:O,CSS_CLASS_BOX_SHOWING:o,CSS_CLASS_NAME_ANIMATE:S,CSS_CLASS_NAME_FREE_BOX:r,OCCUPIED_COLUMN_VALUE:T,SELECTOR_PREFIX_ROTATE:n,SELECTOR_SHAPE_FULL_CLASS_NAME_SHAPE:R,SHAPE_DATA_BOX_PART_COLUMN:s,SHAPE_DATA_BOX_PART_ROW:C}={ACTIONS_STEP_VALUE:{rotate:1,move:1},ANIMATE_LEFT:3.1,ANIMATE_TOP:3.1,APP_NAME:"Tetris",APP_VERSION:"0.0.2",AUTO_MOVE_ENABLE:!1,AUTO_MOVE_INTERVAL_SHAPE:800,BOARD_DATA_COLUMN:"data-board-column",BOARD_DATA_ROW:"data-board-row",CSS_CLASS_BOX_HIDDEN:"shape-part-hide",CSS_CLASS_BOX_SHOWING:"shape-part-show",CSS_CLASS_NAME_ANIMATE:"animate",CSS_CLASS_NAME_FREE_BOX:"free-box",CSS_CLASS_OPACITY_0_1:"opacity-0-1",CSS_CLASS_SHAPE:"shape",CSS_CLASS_SHAPE_NAME:"shape-name-{NAME}",CSS_CLASS_SHAPE_Y_BY_X:"shape-{X}-by-{Y}",EVENTS_NAMES:{GAME_BOOTUP:"game:bootUp",GAME_BOARD_APPENDED:"game:boardAppended",GAME_BOOTED:"game:booted",GAME_OVER:"game:over",GAME_CLEAR_FULL_ROWS:"game:clearFullRows",GAME_NO_ROWS_TO_CLEAR:"game:noRowsToClear",GAME_HAS_ROWS_TO_CLEAR:"game:hasRowsToClear",ACTION_TEMPORARY_DISABLD:"action:temporaryDisabled",ACTION_NOT_FOUND:"action:notFound",BOARD_BOOTUP:"board:bootUp",BOARD_BOOTED:"board:booted",BOARD_ELEMENT_READY:"board:elementReady",BOARD_APPENDED:"board:appended",BOARD_SHAPE_ADDED:"board:shapeAdded",BOARD_FULL_ROWS_CLEARED:"board:fullRowsCleared",BOARD_MATRIX_UPDATED:"boardMatrix:updated",SHAPE_FETCH_NEW:"shape:fetchNew",SHAPE_READY_TO_USE:"shape:readyToUse",SHAPE_ADDED_TO_BOARD:"shape:addedToBoard",SHAPE_BEFORE_ACTION_EXECUTION:"shape:beforeActionExecution",SHAPE_AFTER_ACTION_EXECUTION:"shape:afterActionExecution",SHAPE_UPDATED_ON_UI:"shape:updatedOnUI",SHAPE_REACHED_MAX_LEFT:"shape:reachedMaxLeft",SHAPE_REACHED_MAX_RIGHT:"shape:reachedMaxRight",SHAPE_REACHED_MAX_BOTTOM:"shape:reachedMaxBottom",SHAPE_OVERLEPPING_LEFT:"shape:overlappingLeft",SHAPE_OVERLEPPING_RIGHT:"shape:overlappingRight",SHAPE_CANNOT_ROTATE_SO_CLOSE_TO_THE_EDGE:"shape:cannotRotateSoCloseToTheEdge",SHAPE_DETACH_INTO_BOXES:"shape:detachIntoBoxes",SHAPE_DETACHED_INTO_BOXES:"shape:detachedIntoBoxes"},GAME_SETTINGS:{ROWS:6,COLUMNS:8,element:null,startWithShape:null},KEY_TO_DIRECTION:{ArrowLeft:"left",ArrowRight:"right",ArrowDown:"down"},KEY_TO_ROTATE:[" "," "],NON_OCCUPIED_COLUMN_VALUE:0,NOTIFY_TRIGGERS:!0,OCCUPIED_COLUMN_VALUE:1,PRINT_EVENTS_TO_CONSOLE:!0,REQUIRED_PROPERTIES_FOR_CLONE:{location:"Object",matrix:"Array",actions:"Object"},ROOT_FONT_SIZE:"18px",ROTATION_ANGLES:[0,90,180,270,360],SELECTOR_BOARD:"board",SELECTOR_HINTS_WRAPPER:"hints_wrapper",SELECTOR_PREFIX_ROTATE:"rotate-",SELECTOR_SHAPE_FULL_CLASS_NAME_SHAPE:"shape shape-name-{NAME} shape-{X}-by-{Y}",SELECTOR_SHAPE_WRAPPER:"shapes_wrapper",SHAPES_PACKAGE_NAME:"package_1",SHAPE_DATA_BOX_PART_COLUMN:"data-box-part-column",SHAPE_DATA_BOX_PART_ROW:"data-box-part-row",SHAPE_DATA_NEW_COLUMN:"data-shape-new-column",SHAPE_DATA_NEW_ROW:"data-shape-new-row",SPACE_FIX:.1,TIMEOUT_ADD_ANIMATE_CSS_CLASS:100,TIMEOUT_AFTER_ROWS_CLEARED:10,TIMEOUT_DETACH_SHAPE_INFO_BOXES:700,TIMEOUT_REMOVE_ANIMATE_CSS_CLASS:100,VALID_ACTIONS:{ROTATE:"rotate",MOVE:"move"},VALID_DIRECTIONS:{DOWN:"down",LEFT:"left",RIGHT:"right",SPACEBAR:" ",ENTER:"Enter"}};function N(e){return`.${r}[${a}="${e}"]`}function i(e,_){return`${e}rem ${_}rem`}function c(e){return`${n}${e}`}const{ANIMATE_LEFT:p,ANIMATE_TOP:D,SPACE_FIX:l,BOARD_DATA_COLUMN:P,CSS_CLASS_NAME_ANIMATE:I,EVENTS_NAMES:L,ROTATION_ANGLES:h,TIMEOUT_ADD_ANIMATE_CSS_CLASS:d,TIMEOUT_DETACH_SHAPE_INFO_BOXES:u,TIMEOUT_REMOVE_ANIMATE_CSS_CLASS:M,VALID_ACTIONS:H,SELECTOR_BOARD:m,SELECTOR_SHAPE_WRAPPER:B,SELECTOR_HINTS_WRAPPER:U,TIMEOUT_AFTER_ROWS_CLEARED:g,CSS_CLASS_OPACITY_0_1:f,NON_OCCUPIED_COLUMN_VALUE:b,BOARD_DATA_ROW:w}={ACTIONS_STEP_VALUE:{rotate:1,move:1},ANIMATE_LEFT:3.1,ANIMATE_TOP:3.1,APP_NAME:"Tetris",APP_VERSION:"0.0.2",AUTO_MOVE_ENABLE:!1,AUTO_MOVE_INTERVAL_SHAPE:800,BOARD_DATA_COLUMN:"data-board-column",BOARD_DATA_ROW:"data-board-row",CSS_CLASS_BOX_HIDDEN:"shape-part-hide",CSS_CLASS_BOX_SHOWING:"shape-part-show",CSS_CLASS_NAME_ANIMATE:"animate",CSS_CLASS_NAME_FREE_BOX:"free-box",CSS_CLASS_OPACITY_0_1:"opacity-0-1",CSS_CLASS_SHAPE:"shape",CSS_CLASS_SHAPE_NAME:"shape-name-{NAME}",CSS_CLASS_SHAPE_Y_BY_X:"shape-{X}-by-{Y}",EVENTS_NAMES:{GAME_BOOTUP:"game:bootUp",GAME_BOARD_APPENDED:"game:boardAppended",GAME_BOOTED:"game:booted",GAME_OVER:"game:over",GAME_CLEAR_FULL_ROWS:"game:clearFullRows",GAME_NO_ROWS_TO_CLEAR:"game:noRowsToClear",GAME_HAS_ROWS_TO_CLEAR:"game:hasRowsToClear",ACTION_TEMPORARY_DISABLD:"action:temporaryDisabled",ACTION_NOT_FOUND:"action:notFound",BOARD_BOOTUP:"board:bootUp",BOARD_BOOTED:"board:booted",BOARD_ELEMENT_READY:"board:elementReady",BOARD_APPENDED:"board:appended",BOARD_SHAPE_ADDED:"board:shapeAdded",BOARD_FULL_ROWS_CLEARED:"board:fullRowsCleared",BOARD_MATRIX_UPDATED:"boardMatrix:updated",SHAPE_FETCH_NEW:"shape:fetchNew",SHAPE_READY_TO_USE:"shape:readyToUse",SHAPE_ADDED_TO_BOARD:"shape:addedToBoard",SHAPE_BEFORE_ACTION_EXECUTION:"shape:beforeActionExecution",SHAPE_AFTER_ACTION_EXECUTION:"shape:afterActionExecution",SHAPE_UPDATED_ON_UI:"shape:updatedOnUI",SHAPE_REACHED_MAX_LEFT:"shape:reachedMaxLeft",SHAPE_REACHED_MAX_RIGHT:"shape:reachedMaxRight",SHAPE_REACHED_MAX_BOTTOM:"shape:reachedMaxBottom",SHAPE_OVERLEPPING_LEFT:"shape:overlappingLeft",SHAPE_OVERLEPPING_RIGHT:"shape:overlappingRight",SHAPE_CANNOT_ROTATE_SO_CLOSE_TO_THE_EDGE:"shape:cannotRotateSoCloseToTheEdge",SHAPE_DETACH_INTO_BOXES:"shape:detachIntoBoxes",SHAPE_DETACHED_INTO_BOXES:"shape:detachedIntoBoxes"},GAME_SETTINGS:{ROWS:6,COLUMNS:8,element:null,startWithShape:null},KEY_TO_DIRECTION:{ArrowLeft:"left",ArrowRight:"right",ArrowDown:"down"},KEY_TO_ROTATE:[" "," "],NON_OCCUPIED_COLUMN_VALUE:0,NOTIFY_TRIGGERS:!0,OCCUPIED_COLUMN_VALUE:1,PRINT_EVENTS_TO_CONSOLE:!0,REQUIRED_PROPERTIES_FOR_CLONE:{location:"Object",matrix:"Array",actions:"Object"},ROOT_FONT_SIZE:"18px",ROTATION_ANGLES:[0,90,180,270,360],SELECTOR_BOARD:"board",SELECTOR_HINTS_WRAPPER:"hints_wrapper",SELECTOR_PREFIX_ROTATE:"rotate-",SELECTOR_SHAPE_FULL_CLASS_NAME_SHAPE:"shape shape-name-{NAME} shape-{X}-by-{Y}",SELECTOR_SHAPE_WRAPPER:"shapes_wrapper",SHAPES_PACKAGE_NAME:"package_1",SHAPE_DATA_BOX_PART_COLUMN:"data-box-part-column",SHAPE_DATA_BOX_PART_ROW:"data-box-part-row",SHAPE_DATA_NEW_COLUMN:"data-shape-new-column",SHAPE_DATA_NEW_ROW:"data-shape-new-row",SPACE_FIX:.1,TIMEOUT_ADD_ANIMATE_CSS_CLASS:100,TIMEOUT_AFTER_ROWS_CLEARED:10,TIMEOUT_DETACH_SHAPE_INFO_BOXES:700,TIMEOUT_REMOVE_ANIMATE_CSS_CLASS:100,VALID_ACTIONS:{ROTATE:"rotate",MOVE:"move"},VALID_DIRECTIONS:{DOWN:"down",LEFT:"left",RIGHT:"right",SPACEBAR:" ",ENTER:"Enter"}};function G(e){const _={[L.GAME_BOARD_APPENDED]:function(){n.after(F),F.after(V),G.prototype.events.trigger(L.BOARD_BOOTED)},[L.SHAPE_READY_TO_USE]:function({shape:e}){let _=(A={name:e.name,x:e.rect.totalColumns,y:e.rect.totalRows},R.replace("{NAME}",A.name).replace("{X}",A.x).replace("{Y}",A.y)),E="";var A;e.actions.loopOverStructureInSpace.call(e,(_=>{var A,S,r;E+=(A=e.cssClassName,S=_.structure.row,r=_.structure.column,`<div class="${_.value===T?o:O}${A?` ${A}`:""}" ${a}="${S}" ${t}="${r}" ${C}="${S}" ${s}="${r}"></div>`)})),X=document.createElement("div"),X.className=_+` ${I}`,X.style.translate=i(l,l),X.innerHTML=E,F.append(X),G.prototype.events.trigger(L.SHAPE_ADDED_TO_BOARD)},[L.SHAPE_DETACH_INTO_BOXES]:function({shape:e}){setTimeout((()=>{X&&(e.actions.loopOverStructureInSpace.call(e,(_=>{if(_.value===b)return;const E={top:D*_.structureInSpace.row+l,left:p*_.structureInSpace.column+l},A=document.createElement("div");A.className=function(e){let _=`${r} ${S}`;return e&&(_+=` ${e}`),_}(e.cssClassName),A.style.translate=i(E.left,E.top),A.setAttribute(w,_.structureInSpace.row),A.setAttribute(P,_.structureInSpace.column),F.appendChild(A)})),null==X||X.remove(),X=null,G.prototype.events.trigger(L.SHAPE_DETACHED_INTO_BOXES))}),u)},[L.GAME_HAS_ROWS_TO_CLEAR]:function({removedRows:e}){const _=e.length;let E="";for(let A=0;A<_;A++)E+=N(e[A])+",";document.querySelectorAll(E.slice(0,-1)).forEach((e=>e.remove())),setTimeout((()=>{!function(e){const _=e.length;for(let E=Math.min(...e)-1;E>=0;E--)v(E,E+_)}(e),G.prototype.events.trigger(L.BOARD_FULL_ROWS_CLEARED)}),g)},[L.SHAPE_REACHED_MAX_LEFT]:x,[L.SHAPE_REACHED_MAX_RIGHT]:x,[L.SHAPE_CANNOT_ROTATE_SO_CLOSE_TO_THE_EDGE]:x,[L.ACTION_TEMPORARY_DISABLD]:x,[L.ACTION_NOT_FOUND]:x,[L.GAME_OVER]:function(){n.classList.add(f),F.classList.add(f),F.insertAdjacentHTML("afterend",'<div id="game_over_wrapper"><h1>Game Over</h1></div>')}},E={[H.MOVE]:e=>new Promise((_=>{const E={top:D*e.rect.top+l,left:p*e.rect.left+l};X.style.translate=i(E.left,E.top),_()})),[H.ROTATE]:e=>new Promise((_=>{let E=h[e.currentAngleIndex-1],A=h[e.currentAngleIndex];E?(X.classList.replace(c(E),c(A)),e.currentAngleIndex===h.length-1?setTimeout((()=>{X.classList.remove(I,c(A)),setTimeout((()=>{X.classList.add(I),_()}),d)}),M):_()):(X.classList.add(c(A)),_())}))},n=document.createElement("div"),F=document.createElement("div"),V=document.createElement("div");let X;function W(){G.prototype.events.trigger(L.BOARD_BOOTUP),n.id=m,F.id=B,V.id=U,n.style.gridTemplateColumns=`repeat(${e.COLUMNS}, 1fr)`,n.innerHTML=function(e,_){let E="";for(let A=0;A<e;A++)for(let e=0;e<_;e++)E+=`<div ${a}="${A}" ${t}="${e}"></div>`;return E}(e.ROWS,e.COLUMNS),G.prototype.events.trigger(L.BOARD_ELEMENT_READY)}function x(e,_){V.innerText=function(e,_){A[e]||(e="default");let E={...A[e]};return E.params&&Object.keys(E.params).forEach((e=>{void 0!==_[e]&&(E.text=E.text.replace(`{${e}}`,_[e]))})),E.text}(_,{EVENT_NAME:_})}function v(e,_){document.querySelectorAll(N(e)).forEach((e=>{const E=Number(e.getAttribute(P)),A={top:D*_+l,left:p*E+l};e.setAttribute(w,_),e.style.translate=i(A.left,A.top)}))}return{init(){G.prototype.events.observer(((e,E,A)=>{V.innerText="","function"==typeof _[E]&&_[E].call(_[E],A,E)})),W()},runShapeAction:async function({actionName:e,shape:_}){var A;return await(null==(A=E[e])?void 0:A.call(E[e],_))},getBoardElement:()=>n}}function F(e,_,E,A){let t=new Set,a=Array(e).fill().map((()=>Array(_).fill(E)));function O(e){a.splice(e,1),a.unshift(Array(_).fill(E))}return{getMatrix:()=>a,setRowsToRemove:function(){for(let E=e-1;E>=0;E--){a[E].reduce(((e,_)=>_===A?e+1:e),0)===_&&t.add(E)}!function(){if(!t.size)return;const e=t[Symbol.iterator]();let _,E=0;for(;!1===(_=e.next()).done;)O(_.value+E++)}()},hasRowsToRemove:()=>t.size,getRowsToRemoveAndReset(){let e=Array.from([...t]);return t.clear(),e},printMatrix(){a.forEach((e=>console.log("-Matrix-",e)))},isMaxLeft:e=>e<=0,isMaxRight:e=>e>=_-1,isMaxBottom:_=>_>=e-1,getColumnValue(e,_){var E;return null==(E=a[e])?void 0:E[_]},isColumnHasDefaultValue(e,_){var A;return(null==(A=a[e])?void 0:A[_])===E},isColumnHasOccupiedValue(e,_){var E;return(null==(E=a[e])?void 0:E[_])===A},updateValue:(e,_,E)=>(a[e][_]=E,!0),rowHasAnOccupiedColumn:e=>Math.max(...a[e])===A}}function V(){let e=[];return{trigger(_,E){let A=_.split(":")[0];e.forEach((e=>e.call(e,A,_,E)))},observer(_,E){"function"==typeof _&&e.push(_)}}}const{ACTIONS_STEP_VALUE:X,ROTATION_ANGLES:W,VALID_DIRECTIONS:x}={ACTIONS_STEP_VALUE:{rotate:1,move:1},ANIMATE_LEFT:3.1,ANIMATE_TOP:3.1,APP_NAME:"Tetris",APP_VERSION:"0.0.2",AUTO_MOVE_ENABLE:!1,AUTO_MOVE_INTERVAL_SHAPE:800,BOARD_DATA_COLUMN:"data-board-column",BOARD_DATA_ROW:"data-board-row",CSS_CLASS_BOX_HIDDEN:"shape-part-hide",CSS_CLASS_BOX_SHOWING:"shape-part-show",CSS_CLASS_NAME_ANIMATE:"animate",CSS_CLASS_NAME_FREE_BOX:"free-box",CSS_CLASS_OPACITY_0_1:"opacity-0-1",CSS_CLASS_SHAPE:"shape",CSS_CLASS_SHAPE_NAME:"shape-name-{NAME}",CSS_CLASS_SHAPE_Y_BY_X:"shape-{X}-by-{Y}",EVENTS_NAMES:{GAME_BOOTUP:"game:bootUp",GAME_BOARD_APPENDED:"game:boardAppended",GAME_BOOTED:"game:booted",GAME_OVER:"game:over",GAME_CLEAR_FULL_ROWS:"game:clearFullRows",GAME_NO_ROWS_TO_CLEAR:"game:noRowsToClear",GAME_HAS_ROWS_TO_CLEAR:"game:hasRowsToClear",ACTION_TEMPORARY_DISABLD:"action:temporaryDisabled",ACTION_NOT_FOUND:"action:notFound",BOARD_BOOTUP:"board:bootUp",BOARD_BOOTED:"board:booted",BOARD_ELEMENT_READY:"board:elementReady",BOARD_APPENDED:"board:appended",BOARD_SHAPE_ADDED:"board:shapeAdded",BOARD_FULL_ROWS_CLEARED:"board:fullRowsCleared",BOARD_MATRIX_UPDATED:"boardMatrix:updated",SHAPE_FETCH_NEW:"shape:fetchNew",SHAPE_READY_TO_USE:"shape:readyToUse",SHAPE_ADDED_TO_BOARD:"shape:addedToBoard",SHAPE_BEFORE_ACTION_EXECUTION:"shape:beforeActionExecution",SHAPE_AFTER_ACTION_EXECUTION:"shape:afterActionExecution",SHAPE_UPDATED_ON_UI:"shape:updatedOnUI",SHAPE_REACHED_MAX_LEFT:"shape:reachedMaxLeft",SHAPE_REACHED_MAX_RIGHT:"shape:reachedMaxRight",SHAPE_REACHED_MAX_BOTTOM:"shape:reachedMaxBottom",SHAPE_OVERLEPPING_LEFT:"shape:overlappingLeft",SHAPE_OVERLEPPING_RIGHT:"shape:overlappingRight",SHAPE_CANNOT_ROTATE_SO_CLOSE_TO_THE_EDGE:"shape:cannotRotateSoCloseToTheEdge",SHAPE_DETACH_INTO_BOXES:"shape:detachIntoBoxes",SHAPE_DETACHED_INTO_BOXES:"shape:detachedIntoBoxes"},GAME_SETTINGS:{ROWS:6,COLUMNS:8,element:null,startWithShape:null},KEY_TO_DIRECTION:{ArrowLeft:"left",ArrowRight:"right",ArrowDown:"down"},KEY_TO_ROTATE:[" "," "],NON_OCCUPIED_COLUMN_VALUE:0,NOTIFY_TRIGGERS:!0,OCCUPIED_COLUMN_VALUE:1,PRINT_EVENTS_TO_CONSOLE:!0,REQUIRED_PROPERTIES_FOR_CLONE:{location:"Object",matrix:"Array",actions:"Object"},ROOT_FONT_SIZE:"18px",ROTATION_ANGLES:[0,90,180,270,360],SELECTOR_BOARD:"board",SELECTOR_HINTS_WRAPPER:"hints_wrapper",SELECTOR_PREFIX_ROTATE:"rotate-",SELECTOR_SHAPE_FULL_CLASS_NAME_SHAPE:"shape shape-name-{NAME} shape-{X}-by-{Y}",SELECTOR_SHAPE_WRAPPER:"shapes_wrapper",SHAPES_PACKAGE_NAME:"package_1",SHAPE_DATA_BOX_PART_COLUMN:"data-box-part-column",SHAPE_DATA_BOX_PART_ROW:"data-box-part-row",SHAPE_DATA_NEW_COLUMN:"data-shape-new-column",SHAPE_DATA_NEW_ROW:"data-shape-new-row",SPACE_FIX:.1,TIMEOUT_ADD_ANIMATE_CSS_CLASS:100,TIMEOUT_AFTER_ROWS_CLEARED:10,TIMEOUT_DETACH_SHAPE_INFO_BOXES:700,TIMEOUT_REMOVE_ANIMATE_CSS_CLASS:100,VALID_ACTIONS:{ROTATE:"rotate",MOVE:"move"},VALID_DIRECTIONS:{DOWN:"down",LEFT:"left",RIGHT:"right",SPACEBAR:" ",ENTER:"Enter"}};function v(){function e(){let e=[];const _=this.structure.length,E=this.structure[0].length,A=this.location.y,t=this.location.x;for(let a=0,O=A;a<_;a++,O++)for(let _=0,A=t;_<E;_++,A++)e[a]||(e[a]=[]),e[a][_]={newRow:O,newColumn:A,value:this.structure[a][_]};return e}function _(){const e=this.structure.length,_=this.structure[0].length;return{top:this.location.y,left:this.location.x,bottom:this.location.y+e-1,right:this.location.x+_-1,totalRows:e,totalColumns:_}}return{init(){return this.structureInSpace=e.call(this),this.rect=_.call(this),this},loopOverStructureInSpace(e){const _=this.structureInSpace.length,E=this.structureInSpace[0].length;let A=!1;for(let t=0;t<_&&!A;t++)for(let _=0;_<E&&!A;_++){const E=this.structureInSpace[t][_];A=e.call(e,{structure:{row:t,column:_},value:this.structure[t][_],structureInSpace:{row:E.newRow,column:E.newColumn}})}},move(E,A){return A=A??X[VALID_ACTIONS.MOVE],E===x.DOWN?this.location.y+=A:E===x.RIGHT?this.location.x+=A:E===x.LEFT&&(this.location.x-=A),this.structureInSpace=e.call(this),this.rect=_.call(this),this},rotate(){if(!this.rotationEnable)return this;const E=this.structure.length-1,A=this.structure[0].length-1;let t=[];for(let e=0;e<=E;e++){const _=E-e;for(let E=0;E<=A;E++)t[E]||(t[E]=[]),t[E][_]=this.structure[e][E]}return++this.currentAngleIndex,this.currentAngleIndex>W.length-1&&(this.currentAngleIndex=1),this.structure=t,this.structureInSpace=e.call(this),this.rect=_.call(this),this}}}const{EVENTS_NAMES:y,OCCUPIED_COLUMN_VALUE:Y,VALID_ACTIONS:$,VALID_DIRECTIONS:K}={ACTIONS_STEP_VALUE:{rotate:1,move:1},ANIMATE_LEFT:3.1,ANIMATE_TOP:3.1,APP_NAME:"Tetris",APP_VERSION:"0.0.2",AUTO_MOVE_ENABLE:!1,AUTO_MOVE_INTERVAL_SHAPE:800,BOARD_DATA_COLUMN:"data-board-column",BOARD_DATA_ROW:"data-board-row",CSS_CLASS_BOX_HIDDEN:"shape-part-hide",CSS_CLASS_BOX_SHOWING:"shape-part-show",CSS_CLASS_NAME_ANIMATE:"animate",CSS_CLASS_NAME_FREE_BOX:"free-box",CSS_CLASS_OPACITY_0_1:"opacity-0-1",CSS_CLASS_SHAPE:"shape",CSS_CLASS_SHAPE_NAME:"shape-name-{NAME}",CSS_CLASS_SHAPE_Y_BY_X:"shape-{X}-by-{Y}",EVENTS_NAMES:{GAME_BOOTUP:"game:bootUp",GAME_BOARD_APPENDED:"game:boardAppended",GAME_BOOTED:"game:booted",GAME_OVER:"game:over",GAME_CLEAR_FULL_ROWS:"game:clearFullRows",GAME_NO_ROWS_TO_CLEAR:"game:noRowsToClear",GAME_HAS_ROWS_TO_CLEAR:"game:hasRowsToClear",ACTION_TEMPORARY_DISABLD:"action:temporaryDisabled",ACTION_NOT_FOUND:"action:notFound",BOARD_BOOTUP:"board:bootUp",BOARD_BOOTED:"board:booted",BOARD_ELEMENT_READY:"board:elementReady",BOARD_APPENDED:"board:appended",BOARD_SHAPE_ADDED:"board:shapeAdded",BOARD_FULL_ROWS_CLEARED:"board:fullRowsCleared",BOARD_MATRIX_UPDATED:"boardMatrix:updated",SHAPE_FETCH_NEW:"shape:fetchNew",SHAPE_READY_TO_USE:"shape:readyToUse",SHAPE_ADDED_TO_BOARD:"shape:addedToBoard",SHAPE_BEFORE_ACTION_EXECUTION:"shape:beforeActionExecution",SHAPE_AFTER_ACTION_EXECUTION:"shape:afterActionExecution",SHAPE_UPDATED_ON_UI:"shape:updatedOnUI",SHAPE_REACHED_MAX_LEFT:"shape:reachedMaxLeft",SHAPE_REACHED_MAX_RIGHT:"shape:reachedMaxRight",SHAPE_REACHED_MAX_BOTTOM:"shape:reachedMaxBottom",SHAPE_OVERLEPPING_LEFT:"shape:overlappingLeft",SHAPE_OVERLEPPING_RIGHT:"shape:overlappingRight",SHAPE_CANNOT_ROTATE_SO_CLOSE_TO_THE_EDGE:"shape:cannotRotateSoCloseToTheEdge",SHAPE_DETACH_INTO_BOXES:"shape:detachIntoBoxes",SHAPE_DETACHED_INTO_BOXES:"shape:detachedIntoBoxes"},GAME_SETTINGS:{ROWS:6,COLUMNS:8,element:null,startWithShape:null},KEY_TO_DIRECTION:{ArrowLeft:"left",ArrowRight:"right",ArrowDown:"down"},KEY_TO_ROTATE:[" "," "],NON_OCCUPIED_COLUMN_VALUE:0,NOTIFY_TRIGGERS:!0,OCCUPIED_COLUMN_VALUE:1,PRINT_EVENTS_TO_CONSOLE:!0,REQUIRED_PROPERTIES_FOR_CLONE:{location:"Object",matrix:"Array",actions:"Object"},ROOT_FONT_SIZE:"18px",ROTATION_ANGLES:[0,90,180,270,360],SELECTOR_BOARD:"board",SELECTOR_HINTS_WRAPPER:"hints_wrapper",SELECTOR_PREFIX_ROTATE:"rotate-",SELECTOR_SHAPE_FULL_CLASS_NAME_SHAPE:"shape shape-name-{NAME} shape-{X}-by-{Y}",SELECTOR_SHAPE_WRAPPER:"shapes_wrapper",SHAPES_PACKAGE_NAME:"package_1",SHAPE_DATA_BOX_PART_COLUMN:"data-box-part-column",SHAPE_DATA_BOX_PART_ROW:"data-box-part-row",SHAPE_DATA_NEW_COLUMN:"data-shape-new-column",SHAPE_DATA_NEW_ROW:"data-shape-new-row",SPACE_FIX:.1,TIMEOUT_ADD_ANIMATE_CSS_CLASS:100,TIMEOUT_AFTER_ROWS_CLEARED:10,TIMEOUT_DETACH_SHAPE_INFO_BOXES:700,TIMEOUT_REMOVE_ANIMATE_CSS_CLASS:100,VALID_ACTIONS:{ROTATE:"rotate",MOVE:"move"},VALID_DIRECTIONS:{DOWN:"down",LEFT:"left",RIGHT:"right",SPACEBAR:" ",ENTER:"Enter"}};function j(e,_){const E={getRandom(){const _=Math.floor(Math.random()*e.AVAILABLE_SHAPES.length);return this.getShape(e.AVAILABLE_SHAPES[_])},getShape(e){const _=new e;return _.name=_.constructor.name,_.actions=v.call(_),_.actions.init.call(_),_}},A={[$.MOVE](e,E){const A=E.params[0];if(A===K.LEFT){if(_.isMaxLeft(e.rect.left))return j.prototype.events.trigger(y.SHAPE_REACHED_MAX_LEFT),!1;if(o(A))return j.prototype.events.trigger(y.SHAPE_OVERLEPPING_LEFT,{shape:t}),!1}else if(A===K.RIGHT){if(_.isMaxRight(e.rect.right))return j.prototype.events.trigger(y.SHAPE_REACHED_MAX_RIGHT),!1;if(o(A))return j.prototype.events.trigger(y.SHAPE_OVERLEPPING_RIGHT,{shape:t}),!1}else if(A===K.DOWN&&(_.isMaxBottom(e.rect.bottom)||S()))return j.prototype.events.trigger(y.SHAPE_REACHED_MAX_BOTTOM,{shape:t}),!1;return!0},[$.ROTATE]:e=>_.isMaxBottom(e.rect.bottom-1)?(j.prototype.events.trigger(y.SHAPE_CANNOT_ROTATE_SO_CLOSE_TO_THE_EDGE),!1):!(_.isMaxRight(e.rect.right)&&e.rect.totalRows>e.rect.totalColumns)||(j.prototype.events.trigger(y.SHAPE_CANNOT_ROTATE_SO_CLOSE_TO_THE_EDGE),!1)};let t,a,O=!0;function o(e){let E;E=e===K.RIGHT?t.rect.right:t.rect.left;let A=_.isColumnHasDefaultValue(t.rect.top,E),a=_.isColumnHasDefaultValue(t.rect.bottom,E);return!A||!a}function S(){let e=!0;return t.actions.loopOverStructureInSpace.call(t,(E=>{let A=E.structureInSpace;if(_.isColumnHasOccupiedValue(A.row,A.column))return e=!1,!0})),!e}return{getShape:e=>(j.prototype.events.trigger(y.SHAPE_FETCH_NEW),O&&e?(O=!1,t=E.getShape(e)):t=E.getRandom(),j.prototype.events.trigger(y.SHAPE_READY_TO_USE,{shape:t}),t),isOverlappingAnotherShape:function(){const e=o(K.LEFT),_=o(K.RIGHT),E=S();return e||_||E},isReachedMaxBottom:()=>(null==a?void 0:a.name)===$.MOVE&&(null==a?void 0:a.params[0])===K.DOWN&&function(){let e=!1;return t.actions.loopOverStructureInSpace.call(t,(E=>{if(!e&&E.value===Y&&(_.isMaxBottom(E.structureInSpace.row)||_.isColumnHasOccupiedValue(E.structureInSpace.row+1,E.structureInSpace.column)))return e=!0,!0})),e&&(t.actions.loopOverStructureInSpace.call(t,(e=>{e.value===Y&&_.updateValue(e.structureInSpace.row,e.structureInSpace.column,e.value)})),_.setRowsToRemove(),j.prototype.events.trigger(y.SHAPE_REACHED_MAX_BOTTOM,{shape:t}),j.prototype.events.trigger(y.BOARD_MATRIX_UPDATED,{boardMatrix:_.getMatrix()})),e}(),isActionAllowed(e){if("function"!=typeof A[e.name])return j.prototype.events.trigger(y.ACTION_NOT_FOUND),!1;return!!A[e.name].call(A[e.name],t,e)},executeAction(e){a=e,j.prototype.events.trigger(y.SHAPE_BEFORE_ACTION_EXECUTION,{actionName:e.name,shape:t}),t.actions[e.name].apply(t,e.params),j.prototype.events.trigger(y.SHAPE_AFTER_ACTION_EXECUTION,{actionName:e.name,shape:t})}}}function k(){this.name=null,this.cssClassName=null,this.location={x:0,y:0},this.currentAngleIndex=0,this.structure=[],this.structureInSpace=[],this.rect={},this.actions={},this.rotationEnable=!0,this.clone=function(){const e=new this.constructor;return Object.keys(REQUIRED_PROPERTIES_FOR_CLONE).forEach((_=>{const E=REQUIRED_PROPERTIES_FOR_CLONE[_];e[_]="Object"===E?{...this[_]}:[...this[_]]})),e}}const q=[function(){k.call(this),this.cssClassName="shape-bg-1",this.structure=[[0,1,1],[1,1,0]]},function(){k.call(this),this.cssClassName="shape-bg-2",this.structure=[[1,1,1],[0,1,0]]},function(){k.call(this),this.cssClassName="shape-bg-3",this.structure=[[1,0],[1,1]]},function(){k.call(this),this.cssClassName="shape-bg-4",this.structure=[[1],[1],[1]]},function(){k.call(this),this.cssClassName="shape-bg-5",this.structure=[[1,1],[1,1]]},function(){k.call(this),this.rotationEnable=!1,this.cssClassName="shape-bg-6",this.structure=[[1]]}];const Q=Object.freeze(Object.defineProperty({__proto__:null,AVAILABLE_SHAPES:q},Symbol.toStringTag,{value:"Module"})),{KEY_TO_DIRECTION:Z,KEY_TO_ROTATE:z,ACTIONS_STEP_VALUE:J,AUTO_MOVE_ENABLE:ee,EVENTS_NAMES:_e,AUTO_MOVE_INTERVAL_SHAPE:Ee,NOTIFY_TRIGGERS:Ae,OCCUPIED_COLUMN_VALUE:te,PRINT_EVENTS_TO_CONSOLE:ae,VALID_ACTIONS:Oe,VALID_DIRECTIONS:oe,NON_OCCUPIED_COLUMN_VALUE:Se}={ACTIONS_STEP_VALUE:{rotate:1,move:1},ANIMATE_LEFT:3.1,ANIMATE_TOP:3.1,APP_NAME:"Tetris",APP_VERSION:"0.0.2",AUTO_MOVE_ENABLE:!1,AUTO_MOVE_INTERVAL_SHAPE:800,BOARD_DATA_COLUMN:"data-board-column",BOARD_DATA_ROW:"data-board-row",CSS_CLASS_BOX_HIDDEN:"shape-part-hide",CSS_CLASS_BOX_SHOWING:"shape-part-show",CSS_CLASS_NAME_ANIMATE:"animate",CSS_CLASS_NAME_FREE_BOX:"free-box",CSS_CLASS_OPACITY_0_1:"opacity-0-1",CSS_CLASS_SHAPE:"shape",CSS_CLASS_SHAPE_NAME:"shape-name-{NAME}",CSS_CLASS_SHAPE_Y_BY_X:"shape-{X}-by-{Y}",EVENTS_NAMES:{GAME_BOOTUP:"game:bootUp",GAME_BOARD_APPENDED:"game:boardAppended",GAME_BOOTED:"game:booted",GAME_OVER:"game:over",GAME_CLEAR_FULL_ROWS:"game:clearFullRows",GAME_NO_ROWS_TO_CLEAR:"game:noRowsToClear",GAME_HAS_ROWS_TO_CLEAR:"game:hasRowsToClear",ACTION_TEMPORARY_DISABLD:"action:temporaryDisabled",ACTION_NOT_FOUND:"action:notFound",BOARD_BOOTUP:"board:bootUp",BOARD_BOOTED:"board:booted",BOARD_ELEMENT_READY:"board:elementReady",BOARD_APPENDED:"board:appended",BOARD_SHAPE_ADDED:"board:shapeAdded",BOARD_FULL_ROWS_CLEARED:"board:fullRowsCleared",BOARD_MATRIX_UPDATED:"boardMatrix:updated",SHAPE_FETCH_NEW:"shape:fetchNew",SHAPE_READY_TO_USE:"shape:readyToUse",SHAPE_ADDED_TO_BOARD:"shape:addedToBoard",SHAPE_BEFORE_ACTION_EXECUTION:"shape:beforeActionExecution",SHAPE_AFTER_ACTION_EXECUTION:"shape:afterActionExecution",SHAPE_UPDATED_ON_UI:"shape:updatedOnUI",SHAPE_REACHED_MAX_LEFT:"shape:reachedMaxLeft",SHAPE_REACHED_MAX_RIGHT:"shape:reachedMaxRight",SHAPE_REACHED_MAX_BOTTOM:"shape:reachedMaxBottom",SHAPE_OVERLEPPING_LEFT:"shape:overlappingLeft",SHAPE_OVERLEPPING_RIGHT:"shape:overlappingRight",SHAPE_CANNOT_ROTATE_SO_CLOSE_TO_THE_EDGE:"shape:cannotRotateSoCloseToTheEdge",SHAPE_DETACH_INTO_BOXES:"shape:detachIntoBoxes",SHAPE_DETACHED_INTO_BOXES:"shape:detachedIntoBoxes"},GAME_SETTINGS:{ROWS:6,COLUMNS:8,element:null,startWithShape:null},KEY_TO_DIRECTION:{ArrowLeft:"left",ArrowRight:"right",ArrowDown:"down"},KEY_TO_ROTATE:[" "," "],NON_OCCUPIED_COLUMN_VALUE:0,NOTIFY_TRIGGERS:!0,OCCUPIED_COLUMN_VALUE:1,PRINT_EVENTS_TO_CONSOLE:!0,REQUIRED_PROPERTIES_FOR_CLONE:{location:"Object",matrix:"Array",actions:"Object"},ROOT_FONT_SIZE:"18px",ROTATION_ANGLES:[0,90,180,270,360],SELECTOR_BOARD:"board",SELECTOR_HINTS_WRAPPER:"hints_wrapper",SELECTOR_PREFIX_ROTATE:"rotate-",SELECTOR_SHAPE_FULL_CLASS_NAME_SHAPE:"shape shape-name-{NAME} shape-{X}-by-{Y}",SELECTOR_SHAPE_WRAPPER:"shapes_wrapper",SHAPES_PACKAGE_NAME:"package_1",SHAPE_DATA_BOX_PART_COLUMN:"data-box-part-column",SHAPE_DATA_BOX_PART_ROW:"data-box-part-row",SHAPE_DATA_NEW_COLUMN:"data-shape-new-column",SHAPE_DATA_NEW_ROW:"data-shape-new-row",SPACE_FIX:.1,TIMEOUT_ADD_ANIMATE_CSS_CLASS:100,TIMEOUT_AFTER_ROWS_CLEARED:10,TIMEOUT_DETACH_SHAPE_INFO_BOXES:700,TIMEOUT_REMOVE_ANIMATE_CSS_CLASS:100,VALID_ACTIONS:{ROTATE:"rotate",MOVE:"move"},VALID_DIRECTIONS:{DOWN:"down",LEFT:"left",RIGHT:"right",SPACEBAR:" ",ENTER:"Enter"}};function re(e){const _={[_e.BOARD_ELEMENT_READY]:function(){e.element.append(T.getBoardElement()),o.trigger(_e.GAME_BOARD_APPENDED)},[_e.BOARD_BOOTED]:function(){o.trigger(_e.GAME_BOOTED),n()},[_e.SHAPE_DETACHED_INTO_BOXES]:function(){S.hasRowsToRemove()?o.trigger(_e.GAME_HAS_ROWS_TO_CLEAR,{removedRows:S.getRowsToRemoveAndReset()}):o.trigger(_e.GAME_NO_ROWS_TO_CLEAR)},[_e.SHAPE_REACHED_MAX_BOTTOM]:s,[_e.SHAPE_OVERLEPPING_LEFT]:s,[_e.SHAPE_OVERLEPPING_RIGHT]:s,[_e.BOARD_FULL_ROWS_CLEARED]:n,[_e.GAME_NO_ROWS_TO_CLEAR]:n,[_e.SHAPE_ADDED_TO_BOARD]:function(){if(r.isOverlappingAnotherShape())return t=!0,a=!1,O&&clearInterval(O),void o.trigger(_e.GAME_OVER);a=!0},[_e.SHAPE_AFTER_ACTION_EXECUTION]:function(e){T.runShapeAction(e).then((()=>{r.isReachedMaxBottom()||(a=!0)}))}};let E,A,t=!1,a=!0,O=null,o=new V,S=new F(e.ROWS,e.COLUMNS,Se,te);j.prototype.events=o;let r=new j(Q,S);G.prototype.events=o;let T=new G(e);function n(){r.getShape(null==e?void 0:e.startWithShape),ee&&(O=setInterval(R,Ee))}function R(){C({name:Oe.MOVE,params:[oe.DOWN,J[Oe.MOVE]]})}function s({shape:e}){o.trigger(_e.SHAPE_DETACH_INTO_BOXES,{shape:e})}function C(e){t||(a?r.isActionAllowed(e)&&(a=!1,r.executeAction(e)):o.trigger(_e.ACTION_TEMPORARY_DISABLD))}function N(e){E&&clearTimeout(E),E=setTimeout((()=>{C(e)}),100)}return o.observer(((e,E,a)=>{t||(!function(e,_,E){ae&&(E?console.log("Trigger ::",_,E):console.log("Trigger ::",_))}(0,E,a),"function"==typeof _[E]&&_[E].call(_[E],a,E),Ae&&(null==A||A.call(A,E,a)))})),{start(){return o.trigger(_e.GAME_BOOTUP),T.init(),window.addEventListener("keydown",(e=>{z.includes(e.key)?N({name:Oe.ROTATE}):Z[e.key]&&N({name:Oe.MOVE,params:[Z[e.key],J[Oe.MOVE]]})})),this},observer(e){return"function"==typeof e&&(A=e),this}}}const{GAME_SETTINGS:Te,ROOT_FONT_SIZE:ne}={ACTIONS_STEP_VALUE:{rotate:1,move:1},ANIMATE_LEFT:3.1,ANIMATE_TOP:3.1,APP_NAME:"Tetris",APP_VERSION:"0.0.2",AUTO_MOVE_ENABLE:!1,AUTO_MOVE_INTERVAL_SHAPE:800,BOARD_DATA_COLUMN:"data-board-column",BOARD_DATA_ROW:"data-board-row",CSS_CLASS_BOX_HIDDEN:"shape-part-hide",CSS_CLASS_BOX_SHOWING:"shape-part-show",CSS_CLASS_NAME_ANIMATE:"animate",CSS_CLASS_NAME_FREE_BOX:"free-box",CSS_CLASS_OPACITY_0_1:"opacity-0-1",CSS_CLASS_SHAPE:"shape",CSS_CLASS_SHAPE_NAME:"shape-name-{NAME}",CSS_CLASS_SHAPE_Y_BY_X:"shape-{X}-by-{Y}",EVENTS_NAMES:{GAME_BOOTUP:"game:bootUp",GAME_BOARD_APPENDED:"game:boardAppended",GAME_BOOTED:"game:booted",GAME_OVER:"game:over",GAME_CLEAR_FULL_ROWS:"game:clearFullRows",GAME_NO_ROWS_TO_CLEAR:"game:noRowsToClear",GAME_HAS_ROWS_TO_CLEAR:"game:hasRowsToClear",ACTION_TEMPORARY_DISABLD:"action:temporaryDisabled",ACTION_NOT_FOUND:"action:notFound",BOARD_BOOTUP:"board:bootUp",BOARD_BOOTED:"board:booted",BOARD_ELEMENT_READY:"board:elementReady",BOARD_APPENDED:"board:appended",BOARD_SHAPE_ADDED:"board:shapeAdded",BOARD_FULL_ROWS_CLEARED:"board:fullRowsCleared",BOARD_MATRIX_UPDATED:"boardMatrix:updated",SHAPE_FETCH_NEW:"shape:fetchNew",SHAPE_READY_TO_USE:"shape:readyToUse",SHAPE_ADDED_TO_BOARD:"shape:addedToBoard",SHAPE_BEFORE_ACTION_EXECUTION:"shape:beforeActionExecution",SHAPE_AFTER_ACTION_EXECUTION:"shape:afterActionExecution",SHAPE_UPDATED_ON_UI:"shape:updatedOnUI",SHAPE_REACHED_MAX_LEFT:"shape:reachedMaxLeft",SHAPE_REACHED_MAX_RIGHT:"shape:reachedMaxRight",SHAPE_REACHED_MAX_BOTTOM:"shape:reachedMaxBottom",SHAPE_OVERLEPPING_LEFT:"shape:overlappingLeft",SHAPE_OVERLEPPING_RIGHT:"shape:overlappingRight",SHAPE_CANNOT_ROTATE_SO_CLOSE_TO_THE_EDGE:"shape:cannotRotateSoCloseToTheEdge",SHAPE_DETACH_INTO_BOXES:"shape:detachIntoBoxes",SHAPE_DETACHED_INTO_BOXES:"shape:detachedIntoBoxes"},GAME_SETTINGS:{ROWS:6,COLUMNS:8,element:null,startWithShape:null},KEY_TO_DIRECTION:{ArrowLeft:"left",ArrowRight:"right",ArrowDown:"down"},KEY_TO_ROTATE:[" "," "],NON_OCCUPIED_COLUMN_VALUE:0,NOTIFY_TRIGGERS:!0,OCCUPIED_COLUMN_VALUE:1,PRINT_EVENTS_TO_CONSOLE:!0,REQUIRED_PROPERTIES_FOR_CLONE:{location:"Object",matrix:"Array",actions:"Object"},ROOT_FONT_SIZE:"18px",ROTATION_ANGLES:[0,90,180,270,360],SELECTOR_BOARD:"board",SELECTOR_HINTS_WRAPPER:"hints_wrapper",SELECTOR_PREFIX_ROTATE:"rotate-",SELECTOR_SHAPE_FULL_CLASS_NAME_SHAPE:"shape shape-name-{NAME} shape-{X}-by-{Y}",SELECTOR_SHAPE_WRAPPER:"shapes_wrapper",SHAPES_PACKAGE_NAME:"package_1",SHAPE_DATA_BOX_PART_COLUMN:"data-box-part-column",SHAPE_DATA_BOX_PART_ROW:"data-box-part-row",SHAPE_DATA_NEW_COLUMN:"data-shape-new-column",SHAPE_DATA_NEW_ROW:"data-shape-new-row",SPACE_FIX:.1,TIMEOUT_ADD_ANIMATE_CSS_CLASS:100,TIMEOUT_AFTER_ROWS_CLEARED:10,TIMEOUT_DETACH_SHAPE_INFO_BOXES:700,TIMEOUT_REMOVE_ANIMATE_CSS_CLASS:100,VALID_ACTIONS:{ROTATE:"rotate",MOVE:"move"},VALID_DIRECTIONS:{DOWN:"down",LEFT:"left",RIGHT:"right",SPACEBAR:" ",ENTER:"Enter"}};document.querySelector(":root").style.fontSize=ne;const Re="__SHOW_WELCOME_PAGE__",se=document.querySelector("#app");let Ce=localStorage.getItem(Re);function Ne(){const e=document.querySelector("#app_version");e.querySelector("span").innerText="0.0.2",e.classList.remove("hide");const _=new re({...Te,element:document.querySelector("#app")});try{_.start()}catch(E){console.error("errerrerr",E)}}Ce=null===Ce,(async e=>{if(Ce){(0,(await _((()=>import("./index-a1e6b42a.js")),[],import.meta.url)).default)(se).start().onStartTheGame((()=>{localStorage.setItem(Re,!1),Ne()}))}else Ne()})();
